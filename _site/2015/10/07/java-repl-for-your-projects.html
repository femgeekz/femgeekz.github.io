<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Java REPL For Your Projects</title>
    <meta name="description" content="Learn. Unlearn. Relearn.
">
    <link rel="stylesheet" href="/css/main.css">
<link rel="alternate" type="application/atom+xml" title="" href="/atom.xml">    
<link rel="canonical" href="http://femgeekz.github.io/2015/10/07/java-repl-for-your-projects.html">
</head>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-67247971-1', 'femgeekz.github.io');
ga('send', 'pageview');

</script>


<body>

<header class="site-header">

	<div class="wrapper">

		<a class="site-title" href="/">Ramble On</a>

		<nav class="site-nav">
			<a href="#" class="menu-icon">
				<svg viewBox="0 0 18 15">
					<path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
					<path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
					<path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
				</svg>
			</a>

			<div class="trigger">
				
				
				<a class="page-link" href="/about/">About</a>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
			</div>
		</nav>

	</div>

</header>


<div class="page-content">
	<div class="wrapper">
		<div class="post">

	<header class="post-header">
		<h1 class="post-title">Java REPL For Your Projects</h1>
		<p class="post-meta">Oct 7, 2015 • Swathi Venkatachala</p>
		<p class="post-meta"> 
		
    	Tags:
		
		<a href="http://femgeekz.github.io/tag/java" title="Index for java">java</a> • 
		
		
		<a href="http://femgeekz.github.io/tag/REPL" title="Index for REPL">REPL</a> • 
		
		
		<a href="http://femgeekz.github.io/tag/projects" title="Index for projects">projects</a> • 
		
		
		<a href="http://femgeekz.github.io/tag/script" title="Index for script">script</a> • 
		
		
		<a href="http://femgeekz.github.io/tag/JShell" title="Index for JShell">JShell</a> • 
		
		
		<a href="http://femgeekz.github.io/tag/tech" title="Index for tech">tech</a>
		
		</p>
	</header>

	<article class="post-content">
		<p>We have seen REPL (Read-Eval-Print Loop) in lots of languages like Scala, Python, Ruby, Haskell etc. but, orginates from LISP. 
This feature really helps in rapid testing and learning the language. Java needed one such and so, in Java 9, we can expect this.
Refer here : <a href="http://openjdk.java.net/jeps/222">The Java Shell (Read-Eval-Print Loop)</a> as <code class="highlighter-rouge">Project Kulla</code></p>

<p>However, if you would like to try REPL for Java 6+, you can give this a try - <a href="https://github.com/albertlatacz/java-repl">java-repl</a> by <a href="https://github.com/albertlatacz">Albert Latacz</a></p>

<h3 id="getting-started">Getting Started</h3>
<ol>
  <li>Download the <a href="http://albertlatacz.published.s3.amazonaws.com/javarepl/javarepl.jar">jar</a></li>
  <li>Open the terminal</li>
</ol>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="gp">$ </span>java -jar javarepl.jar
Welcome to JavaREPL version 282 <span class="o">(</span>Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM, Java 1.8.0_60<span class="o">)</span>
Type expression to evaluate, :help <span class="k">for </span>more options or press tab to auto-complete.
java&gt;:help</code></pre></figure>

<h3 id="advanced">Advanced</h3>
<p>In this section, we shall look into two things :</p>

<ol>
  <li>
    <p>Importing Other Projects</p>
  </li>
  <li>
    <p>REPL Support For Your Project</p>
  </li>
</ol>

<p>The above two are pretty much the same! While the first one is when you would like to import third party libraries and the latter is a feature support that you would like to give, on your project, to your developers - more like using APIs.</p>

<h4 id="importing-other-projects">Importing Other Projects</h4>
<p>You need to add <code class="highlighter-rouge">javarepl.jar</code> and the path to third party jars (mostly in <code class="highlighter-rouge">lib</code> directory) to your classpath and execute as below.</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="gp">$ </span>java -cp <span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span> javarepl.Main
Welcome to JavaREPL version 282 <span class="o">(</span>Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM, Java 1.8.0_60<span class="o">)</span>
Type expression to evaluate, :help <span class="k">for </span>more options or press tab to auto-complete.
java&gt;</code></pre></figure>

<p>where ${CLASSPATH} can be javarepl.jar:path_to_jar_1:path_to_jar_2: . . . :path_to_jar_n</p>

<h4 id="repl-support-for-your-project">REPL Support For Your Project</h4>
<p>If you need a managed way to invoke a REPL environment without the hassle of CLASSPATH, you can tweak this script ( mostly two parameters per your needs <code class="highlighter-rouge">YOUR_PROJECT_DIR</code> and <code class="highlighter-rouge">YOUR_PROJECT_BUILD_DIR</code>.</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c">#!/bin/bash</span>
<span class="c"># script name : your-project-shell</span>
<span class="c"># script location : parent-project-dir &gt; your-project-shell sub-project-dir1 sub-project-dir2 sub-project-dir3 ...</span>
<span class="c"># run as : ./your-project-shell</span>

<span class="nv">CURR_DIR</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
<span class="nv">REPL_JAR_NAME</span><span class="o">=</span><span class="s2">"javarepl.jar"</span>
<span class="nv">EXT_LIB_FOLDER_NAME</span><span class="o">=</span><span class="s2">"lib"</span>
<span class="nv">EXT_LIB_FOLDER_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CURR_DIR</span><span class="s2">/</span><span class="nv">$EXT_LIB_FOLDER_NAME</span><span class="s2">"</span>
<span class="nv">PATH_TO_REPL_JAR</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CURR_DIR</span><span class="s2">/</span><span class="nv">$EXT_LIB_FOLDER_NAME</span><span class="s2">/</span><span class="nv">$REPL_JAR_NAME</span><span class="s2">"</span>

<span class="nv">YOUR_PROJECT_DIR</span><span class="o">=</span><span class="s2">"some-pretty-api-module"</span>
<span class="nv">YOUR_PROJECT_BUILD_DIR</span><span class="o">=</span><span class="s2">"</span><span class="nv">$CURR_DIR</span><span class="s2">/</span><span class="nv">$YOUR_PROJECT_DIR</span><span class="s2">/build/libs"</span>

<span class="c"># create a lib dir, for external jars</span>
mkdir -p <span class="s2">"</span><span class="k">${</span><span class="nv">EXT_LIB_FOLDER_PATH</span><span class="k">}</span><span class="s2">"</span>

isJarExists<span class="o">()</span> <span class="o">{</span>
	<span class="nb">echo</span> <span class="s2">"Checking if Java REPL exists ..."</span>
	<span class="nb">test</span> -f <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"OK."</span>
<span class="o">}</span>

installJar<span class="o">()</span> <span class="o">{</span>
	<span class="nb">echo</span> <span class="s2">"Java REPL not found! Installing ..."</span>
	<span class="nb">echo
	shift
	pushd</span> <span class="s2">"</span><span class="k">${</span><span class="nv">EXT_LIB_FOLDER_PATH</span><span class="k">}</span><span class="s2">"</span> &gt; /dev/null
	<span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
	<span class="nb">popd</span> &gt; /dev/null
	<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq 0 <span class="o">]</span>; <span class="k">then
		</span><span class="nb">echo</span> <span class="s2">"OK."</span>
	<span class="k">fi</span>
<span class="o">}</span>

<span class="c"># Determine if java repl jar exists or else install</span>
<span class="k">if</span> ! isJarExists <span class="s2">"</span><span class="nv">$PATH_TO_REPL_JAR</span><span class="s2">"</span> ; <span class="k">then
	</span>installJar javarepl wget <span class="s1">'http://albertlatacz.published.s3.amazonaws.com/javarepl/javarepl.jar'</span> -O <span class="s2">"</span><span class="nv">$PATH_TO_REPL_JAR</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c"># Determine the Java command to use to start the JVM.</span>
<span class="k">if</span> <span class="o">[</span> -n <span class="s2">"</span><span class="nv">$JAVA_HOME</span><span class="s2">"</span> <span class="o">]</span> ; <span class="k">then
	if</span> <span class="o">[</span> -x <span class="s2">"</span><span class="nv">$JAVA_HOME</span><span class="s2">/jre/sh/java"</span> <span class="o">]</span> ; <span class="k">then</span>
		<span class="c"># IBM's JDK on AIX uses strange locations for the executables</span>
		<span class="nv">JAVACMD</span><span class="o">=</span><span class="s2">"</span><span class="nv">$JAVA_HOME</span><span class="s2">/jre/sh/java"</span>
	<span class="k">else
		</span><span class="nv">JAVACMD</span><span class="o">=</span><span class="s2">"</span><span class="nv">$JAVA_HOME</span><span class="s2">/bin/java"</span>
	<span class="k">fi
	if</span> <span class="o">[</span> ! -x <span class="s2">"</span><span class="nv">$JAVACMD</span><span class="s2">"</span> <span class="o">]</span> ; <span class="k">then
		</span>die <span class="s2">"ERROR: JAVA_HOME is set to an invalid directory: </span><span class="nv">$JAVA_HOME</span><span class="s2">

		Please set the JAVA_HOME variable in your environment to match the
		location of your Java installation."</span>
	<span class="k">fi
else
	</span><span class="nv">JAVACMD</span><span class="o">=</span><span class="s2">"java"</span>
	which java &gt;/dev/null 2&gt;&amp;1 <span class="o">||</span> die <span class="s2">"ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

	Please set the JAVA_HOME variable in your environment to match the
	location of your Java installation."</span>
<span class="k">fi</span>

<span class="c"># Add all the required jars to classpath</span>
<span class="k">if</span> <span class="o">[[</span> -d <span class="s2">"</span><span class="k">${</span><span class="nv">EXT_LIB_FOLDER_PATH</span><span class="k">}</span><span class="s2">"</span> <span class="o">]]</span>; <span class="k">then
	for </span>jar <span class="k">in</span> <span class="s2">"</span><span class="k">${</span><span class="nv">EXT_LIB_FOLDER_PATH</span><span class="k">}</span><span class="s2">"</span>/<span class="k">*</span>.jar; <span class="k">do
		</span><span class="nb">echo</span> <span class="s2">"[INFO] : Adding </span><span class="nv">$jar</span><span class="s2"> to the CLASSPATH ..."</span>
		<span class="k">if</span> <span class="o">[</span> -z <span class="nv">$CLASSPATH</span> <span class="o">]</span>; <span class="k">then
			</span><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$jar</span><span class="s2">"</span>
		<span class="k">else
			</span><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$jar</span><span class="s2">:</span><span class="nv">$CLASSPATH</span><span class="s2">"</span>
		<span class="k">fi
	done
fi

if</span> <span class="o">[[</span> -d <span class="s2">"</span><span class="k">${</span><span class="nv">YOUR_PROJECT_BUILD_DIR</span><span class="k">}</span><span class="s2">"</span> <span class="o">]]</span>; <span class="k">then
	for </span>jar <span class="k">in</span> <span class="s2">"</span><span class="k">${</span><span class="nv">YOUR_PROJECT_BUILD_DIR</span><span class="k">}</span><span class="s2">"</span>/<span class="k">*</span>.jar; <span class="k">do
		</span><span class="nb">echo</span> <span class="s2">"[INFO] : Adding </span><span class="nv">$jar</span><span class="s2"> to the CLASSPATH ..."</span>
		<span class="k">if</span> <span class="o">[</span> -z <span class="nv">$CLASSPATH</span> <span class="o">]</span>; <span class="k">then
			</span><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$jar</span><span class="s2">"</span>
		<span class="k">else
			</span><span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$jar</span><span class="s2">:</span><span class="nv">$CLASSPATH</span><span class="s2">"</span>
		<span class="k">fi
	done
fi</span>

<span class="c"># List in the CLASSPATH</span>
<span class="nb">echo</span> -e <span class="s2">"[INFO] : CLASSPATH : </span><span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span><span class="s2">"</span>

<span class="nb">exec</span> <span class="k">${</span><span class="nv">JAVACMD</span><span class="k">}</span> -cp <span class="k">${</span><span class="nv">CLASSPATH</span><span class="k">}</span> javarepl.Main</code></pre></figure>

<p>Hope this helps!</p>

<p>Happy REPL-ing! :)</p>


	</article>

</div>


		
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
   var disqus_shortname = 'femgeekz';
// var disqus_developer = 1; // Comment out when the site is live

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
 dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



	</div>
</div>

<footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Ramble On</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Ramble On</li>
          <li><a href="mailto:swatzdev@gmail.com">swatzdev@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/SwathiMystery">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">SwathiMystery</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/idevnull">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">idevnull</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Learn. Unlearn. Relearn.
</p>
      </div>
    </div>

  </div>

</footer>

</body>

</html>
