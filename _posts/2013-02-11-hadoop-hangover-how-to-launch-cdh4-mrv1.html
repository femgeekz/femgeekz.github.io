---
layout: post
title: ! 'Hadoop Hangover &#58; How-to launch a hadoop cluster CDH4 [MRv1 / YARN + Ganglia]
  using Apache Whirr'
date: '2013-02-11T17:23:00.000+05:30'
author: Swathi Venkatachala
tags:
- Ganglia
- CDH4
- Hadoop cluster
- Install Hadoop
- EC2
- Apache Hadoop
- aws
- Yarn
- Firefox
- MRv1
- Apache Whirr
- configuration
- FoxyProxy
- proxy
- Web UI
modified_time: '2013-02-14T16:45:20.281+05:30'
blogger_id: tag:blogger.com,1999:blog-6187879032785791598.post-1455573803983167351
blogger_orig_url: http://femgeekz.blogspot.com/2013/02/hadoop-hangover-how-to-launch-cdh4-mrv1.html
comments: true
---

<br /><span style="color: #444444; font-family: Trebuchet MS, sans-serif;"><span style="line-height: 25px;">&nbsp; This post is about how-to launch a CDH4 MRv1 or CDH4 Yarn cluster on EC2 instances. It's said that you can launch a cluster with the help of Whirr and in a matter of 5 minutes! This is very true if and only if everything works out well! ;)&nbsp;</span></span><br /><span style="color: #444444; font-family: Trebuchet MS, sans-serif;"><span style="line-height: 25px;"></span></span><br /><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">Hopefully, this article helps you in that regard.</span><br /><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">So, let's row the boat...</span><br /><ul><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">Download the stable version of Apache Whirr &nbsp;ie. whirr-0.8.1.tar.gz from the following link&nbsp;<a href="http://apache.techartifact.com/mirror/whirr/stable/whirr-0.8.1.tar.gz">whirr-0.8.1.tar.gz</a></span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">Extract from the tarball and generate the key&nbsp;</span></span></li><script src="https://gist.github.com/SwathiMystery/4753960.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Generate the key</span></li><script src="https://gist.github.com/SwathiMystery/4753989.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Make a properties file to launch the cluster with that configuration.</span></li><script src="https://gist.github.com/SwathiMystery/4753999.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Now let me tell you how to avoid getting headaches!</span></li></ul><div><ul><ul><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">cluster name: Keep your cluster name simple. Avoid testCluster, testCluster1 etc. ie. No Caps, numerics..</span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">Decide on the number of datanodes you want judiciously.</span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">Your launch may not be successful, if java is not installed. Make sure the image has Java. However, this properties file takes care of that.</span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">It will be good to go ahead with MRv1 for now and later switch to MRv2, when we get a production stable release.</span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">This is the minimal set of configurations for launching a Hadoop cluster. But, you can do a lot performance tuning upon this.</span></span></li><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">I had launched this cluster from an ec2 instance, Initially i faced errors, regarding user. Setting the configuration below, solved the problem.</span></span></li><script src="https://gist.github.com/SwathiMystery/4754004.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Set proper permissions for ~/.ssh and whirr-0.8.1 folder before launching.</span></li></ul></ul><ul><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">&nbsp;Well, we are ready to launch the cluster. Name the properties file as "whirr_cdh.properties".</span></span></li><script src="https://gist.github.com/SwathiMystery/4754006.js"></script></ul></div><div><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">In the console you can see, links to Namenode and JobTracker Web UI. It also prints how to ssh to the instances in the end.</span><br /><br /><ul><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">Now, you should be having the files generated.&nbsp;</span></span><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">You will be able to see &nbsp;these files:&nbsp;</span><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">instances, hadoop-proxy.sh and hadoop-site.xml</span></li><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Starting the proxy</span></li><script src="https://gist.github.com/SwathiMystery/4754019.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">Open another terminal, and type</span></li><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">You should be able to access the HDFS.</span></li><script src="https://gist.github.com/SwathiMystery/4754021.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">You can alternatively download hadoop tarball and launch with&nbsp;</span></li><script src="https://gist.github.com/SwathiMystery/4754031.js"></script><li><span style="color: #444444; font-family: 'Trebuchet MS', sans-serif;">&nbsp;Okay! So I know that you will not be satisfied unless you a web UI</span></li><script src="https://gist.github.com/SwathiMystery/4952132.js"></script></ul><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">So, we are good to go!&nbsp;</span><br /><ul><li><span style="color: #444444;"><span style="font-family: Trebuchet MS, sans-serif;">&nbsp; If you want to launch MRv2, &nbsp;use this.</span></span></li><script src="https://gist.github.com/SwathiMystery/4754048.js"></script></ul><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">and the same process!&nbsp;</span><br /><span style="color: #444444; font-family: Trebuchet MS, sans-serif;">Happy Learning! :)</span><br /><div></div></div>