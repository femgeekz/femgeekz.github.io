---
layout: post
title: Introduction and getting started with Apache Mesos
date: '2014-12-20T17:38:00.002+05:30'
author: Swathi Venkatachala
tags:
- mesos
- storm
- open source
- ubuntu
- spark
- distributed systems
- hadoop
- apache mesos
- jenkins
- clusters
modified_time: '2014-12-20T17:38:44.049+05:30'
thumbnail: http://4.bp.blogspot.com/-JLrg7zk7lSw/VJVki01KVYI/AAAAAAAAEFw/rUjOAmRfdKU/s72-c/mesos_home.png
blogger_id: tag:blogger.com,1999:blog-6187879032785791598.post-4698595712585160888
blogger_orig_url: http://femgeekz.blogspot.com/2014/12/introduction-and-getting-started-with.html
comments: true
---

<h3><span style="font-family: Trebuchet MS, sans-serif;">Introduction to Apache Mesos</span></h3><span style="font-family: Trebuchet MS, sans-serif;">In this era of distributed computing, where we spin up clusters for Hadoop, Storm, Jenkins, Cassandra, etc separately, we are not making effective use of the resources. There would be long pauses in the cluster after entering a burst of information, thus making it very in-efficient.&nbsp;</span><br /><span style="font-family: Trebuchet MS, sans-serif;">Now, what if all these frameworks shared the same set of machines and resources, then small slices of time spent waiting for some resources could be granted to other frameworks. This is the concept of Time Sharing.&nbsp;</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Apache Mesos is a datacenter operating system and it shares the same philosophy of time-sharing.&nbsp;Mesos is called a datacenter because it hosts different frameworks under a single roof. It is called an operating system because shares many concepts of&nbsp;Linux.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">1. <b>Isolation</b> : Linux creates isolation through processes where, each of these processes has its own file descriptors and its own address space. This is achieved by Linux Containers (wiki:<a href="https://en.wikipedia.org/wiki/LXC">LXC</a>) in Mesos</span><br /><span style="font-family: Trebuchet MS, sans-serif;">2. <b>Process Scheduler</b> : The processes have accesses to the system resources by balancing the work loads across multiple computing resources, thereby&nbsp;optimizing&nbsp;resources,&nbsp;maximize&nbsp;the&nbsp;throughput,&nbsp;minimizing&nbsp;the response time and avoiding the overhead by any one&nbsp;resource. There are various scheduling algorithms to execute more than one process at a time (wiki:<a href="https://en.wikipedia.org/wiki/Computer_multitasking">Multitasking</a>) and also transmit multiple data streams simultaneously across a single physical channel(wiki:<a href="https://en.wikipedia.org/wiki/Multiplexing">Multiplexing</a>). Mesos uses such scheduling algorithms.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">3. <b>Common Infrastructure</b> : Linux has a set of calls irrespective of filesystems, drivers etc. Similarly, Mesos has a common set of calls which helps in the execution of tasks.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">4.<b> Package Manager</b> : Linux has apt-get, aptitude, synaptic, yum etc that helps in the automation of the process of installing, upgrading, configuring, and removing&nbsp;software. Similarly, Mesos has a recent support for Docker(wiki:<a href="https://en.wikipedia.org/wiki/Docker_(software)">Docker</a>)</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Traditionally, distributed systems has 2 components in a non-peer to peer systems.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">1. <b>Coordinator</b> : Generate tasks, send the tasks to worker and receive results from Worker.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">2.<b> Worker</b> : Execute the tasks and send the status and results back to Worker.</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">With Mesos, there are three levels <b>Coordinator</b>,<b> Mesos master </b>and<b> Mesos slaves</b> where coordinator&nbsp;negotiates&nbsp;with mesos master and then master decides on partitioning the cluster&nbsp;to distribute the tasks. Thus, we can schedule jobs across the machines, thereby running hadoop, cassandra, spark etc.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">All the distributed systems that run on Mesos are called applications or frameworks and the coordinator&nbsp;is called as scheduler in Mesos vocabulary.</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><h3><span style="font-family: Trebuchet MS, sans-serif;"><b>How does Mesos work?</b></span></h3><span style="font-family: Trebuchet MS, sans-serif;">In summary, Mesos works on a request/offer based model. Whenever, you want to run a job, you send a request. These requests are simplified subset of specification like number of GPUs, RAM etc, at that point of time. Mesos, checks for the request specification and it will reply back with the resource offers of what resources are available on a set of machines. This is non-blocking and has two level of scheduling : Offering and Scheduling.</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><b>Mesos master</b>: Control the resource allocation to the schedulers</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><b>Scheduler</b>: Uses the resource offers to decide which tasks to run and which one to run next.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">More information on Mesos architecture is here : <a href="http://mesos.apache.org/documentation/latest/mesos-architecture/">Mesos Architecture</a></span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><h3><span style="font-family: Trebuchet MS, sans-serif;"><b>Getting started with mesos</b></span></h3><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">1. Download the tarball from the </span><span style="font-family: Courier New, Courier, monospace;"><a href="http://www.apache.org/dyn/mirrors/mirrors.cgi/mesos/0.21.0/">Mirror</a></span><span style="font-family: Trebuchet MS, sans-serif;"> Apache Mesos v0.21.0 and untar it.</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">tar -zvxf &nbsp;mesos-0.21.0.tar.gz&nbsp;</span><br /><span style="font-family: Courier New, Courier, monospace;">cd mesos-0.21.0/</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">2. Install the dependencies</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">sudo apt-get update</span><br /><span style="font-family: Courier New, Courier, monospace;">sudo apt-get install build-essential openjdk-6-jdk python-dev python-boto libcurl4-nss-dev libsasl2-dev maven &nbsp;libapr1-dev libsvn-dev</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">3. Building Mesos</span><br /><span style="font-family: Trebuchet MS, sans-serif;">Please make sure it has appropriate permissions while building.</span><br /><span style="font-family: 'Trebuchet MS', sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">mkdir build</span><br /><span style="font-family: Courier New, Courier, monospace;">cd build</span><br /><span style="font-family: Courier New, Courier, monospace;">../configure</span><br /><span style="font-family: Courier New, Courier, monospace;">make</span><br /><span style="font-family: Courier New, Courier, monospace;">make check&nbsp;</span><br /><span style="font-family: Courier New, Courier, monospace;">make install</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Start Mesos Master</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">./bin/mesos-master.sh --ip=127.0.0.1 --work_dir=/var/lib/mesos</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Start Mesos Slave</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">./bin/mesos-slave.sh --master=127.0.0.1:5050</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Web UI</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">http://127.0.0.1:5050</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Trebuchet MS, sans-serif;">Running a test framework in Java</span><br /><span style="font-family: Trebuchet MS, sans-serif;"><br /></span><span style="font-family: Courier New, Courier, monospace;">./src/examples/java/test-framework 127.0.0.1:5050</span><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><div class="separator" style="clear: both; text-align: center;"></div><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-JLrg7zk7lSw/VJVki01KVYI/AAAAAAAAEFw/rUjOAmRfdKU/s1600/mesos_home.png" imageanchor="1" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-JLrg7zk7lSw/VJVki01KVYI/AAAAAAAAEFw/rUjOAmRfdKU/s1600/mesos_home.png" height="350" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Mesos Home</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-1hiF4wbjl3I/VJVkilQUn7I/AAAAAAAAEFs/-jmTV4ogzuc/s1600/mesos_frameworks.png" imageanchor="1" style="margin-left: auto; margin-right: auto; text-align: center;"><img border="0" src="http://2.bp.blogspot.com/-1hiF4wbjl3I/VJVkilQUn7I/AAAAAAAAEFs/-jmTV4ogzuc/s1600/mesos_frameworks.png" height="306" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Mesos Frameworks</td></tr></tbody></table><a href="http://4.bp.blogspot.com/-JLrg7zk7lSw/VJVki01KVYI/AAAAAAAAEFw/rUjOAmRfdKU/s1600/mesos_home.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"></a><br /><a href="http://4.bp.blogspot.com/-JLrg7zk7lSw/VJVki01KVYI/AAAAAAAAEFw/rUjOAmRfdKU/s1600/mesos_home.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"></a><br /><br /><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-D8Uc7Cz2FXs/VJVkkFhBdPI/AAAAAAAAEF8/E_rbY9OB3Us/s1600/mesos_task_execution.png" imageanchor="1" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" src="http://4.bp.blogspot.com/-D8Uc7Cz2FXs/VJVkkFhBdPI/AAAAAAAAEF8/E_rbY9OB3Us/s1600/mesos_task_execution.png" height="310" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Mesos &nbsp;executor tasks</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: left; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-tHU3GiV5bjQ/VJVkiidMSdI/AAAAAAAAEF0/nnqe5G6su00/s1600/mesos_slaves.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-tHU3GiV5bjQ/VJVkiidMSdI/AAAAAAAAEF0/nnqe5G6su00/s1600/mesos_slaves.png" height="336" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Mesos Slave Nodes</td></tr></tbody></table><br /><span style="font-family: Courier New, Courier, monospace;"><br /></span><div class="separator" style="clear: both; text-align: center;"></div><span style="font-family: 'Trebuchet MS', sans-serif;">In the next post, let us see how to build our own distributed framework on Apache Mesos.</span><br /><span style="font-family: Trebuchet MS, sans-serif;">Happy Learning! :)</span><br /><br />